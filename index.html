<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
		<script type="text/javascript" src="http://jplayer.org/latest/js/jquery.jplayer.min.js"></script>
		
		<style type="text/css">
			#main_container {
				width:500px;
			}
			
			#album_art_container {				
				-webkit-box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 1);
				-moz-box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 1);
				box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 1);
				position:relative;
				width:500px;
				height:500px;
			}
			#album_art {
				width:500px;
				height:500px;
			}
			
			#overlay {
				background-color:rgba(0,0,0,0.8);
				width:100px;
				height:50px;
				position:absolute;
				bottom:0px;
				right:0px;
				color:white;
				font-family: sans-serif;
				padding:10px;
				font-size:14px;
			}
			
			html {
				background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAkCAMAAAAw96PuAAAAMFBMVEUbGxsaGhoiIiIcHBwVFRUYGBggICAeHh4WFhYfHx8XFxcUFBQdHR0ZGRkhISESEhKy7ZvJAAABQUlEQVR42l1TUZLFIAiDRQpS3Xf/2+6Ugjw2X6nTxMgEAPxJ0IAXzFeeCcKFCoHJ9pKbKI5wCNBUjE+S4dR4pkhRABbcEBDUV5cWW6ebG597FF9dYMBy80zofq4LsM1MWGGNXRcWizJhhaXbKuaWr4QJ28UfiwDveQUIsbjBGcta9AJYwCgwt7b7ckKiDP/yoZ4JsU5YNCqf0zYhWs+L7fyiHLqA+UtpjXi8+4XOgfG8Suh+bUJBM6H7gYGdCclJeGsAGaimJXm/8VUThAtGr0cWJGmrR5i0gkirh8AIXRWkFTj87kdXlY4CVz1S1yotbSFC1xNPhQQNphOzEq+vjmFxXZAw/K0t/OKW+foK9QWr+2qF2oLto6sJ9QUbVaxaoV4Pdp30FaJWj9RVpavATrfCx3U9seiuhQBGPZBTYC38AccDDZOEuQAKAAAAAElFTkSuQmCC);
				height:100%;
			}
			body {
				background:-webkit-gradient(radial, 50% 35%, 0, 50% 50%, 450, from(rgba(255,255,255,.4)), to(rgba(0,0,0,0)));
				height:100%;
				margin:0;
			}
			
			#credits {
				font-family: sans-serif;
				font-size:10px;
				color:white;
				position:absolute;
				bottom:20px;
				right:20px;
			}
			
			#credits a {
				color: #9ee2ff;
			}
			
			#title {
				font-family: sans-serif;
				font-size:20px;
				color:white;
				padding-bottom:15px;
				text-shadow: 2px 2px 3px #000;
			}
			
			.player_button {
				background-color: rgba(0,0,0,.3);
				color:white;
				font-size:20px;
				cursor:pointer;
				border-radius:5px;
				margin-bottom:10px;
				text-align:center;
				width:50px;
				padding:10px 0;
			}
			.player_button:hover {
				background-color: rgba(0,0,0,.6);
			}
			
			
			.ui-slider-vertical {
				width:35px;
			}
			
			.ui-widget-content {
				border:0;
				background-color:rgba(0,0,0,.3);
				border-radius:5px;
			}
			
			.ui-slider {
				position:relative;
				text-align:left;
			}
			
			.ui-slider-vertical .ui-slider-range-min {
				bottom:0;
			}
			
			.ui-slider-vertical .ui-slider-range {
				left:0;
				width:100%;
			}
			
			.ui-slider .ui-slider-range {
				position: absolute;
				z-index: 1;
				font-size: .7em;
				display: block;
				border: 0;
				background-position: 0 0;
			}
			
			.ui-widget-header {
				border:0;
				background-color:rgba(0,0,0,.3);
				font-weight: bold;
			}
		</style>
	</head>
	
    <body>
    	<div id="jquery_jplayer"></div>

		<div id="main_container">
			<div id="title"><span id="track-artist"></span> - <span id="track-title"></span></div>
			
			<div style="position:relative; height:500px;">				
				<div id="slider-vertical" style="height:500px; position:absolute; left:-55px; bottom:0px;"></div>
				<div style="position:absolute; right: -70px;">
					<div id="like" class="player_button">&#9650;</div>
					<div class="player_button">&#9660;</div>
					<div id="next" class="player_button">&#9654;&#9654;</div>
				</div>
				
		        <div id="album_art_container"><img id="album_art" src="" width="500px" height="500px" /></div>
	        </div>
	        
	        <div id="footer" style="padding-top:15px;">
		        <div style="float:left;">
		        	<select>
		        		<option>Amon Tobin Radio</option>
		        		<option>Beatles Radio</option>
		        	</select>
		        </div>
	        </div>
        </div>
        
		<div id="credits">
			created by <a href="mailto:andrew.robert.moffat@gmail.com">Andrew Moffat</a>
		</div>
        
        <script type="text/javascript">
        
        	var lp_cursor = "";
        
        	function long_poll() {
        		$.get("/events", {cursor: lp_cursor}, function(data) {
        			
        		});
        	}
        
        	function control(data, success) {
        		$.get("/control", data, success);
        	}
        	
        	function song_info() {
        		$.get("/current_song_info", function(data) {
        			$("#album_art").attr("src", data.album_art);
        			$("#track-artist").text(data.artist);
        			$("#track-title").text(data.title);
        		})
        	}
        	
        	$(function() {      
        		
        		$(window).resize(function(){
					$('#main_container').css({
						position:'absolute',
						left: ($(window).width() - $('#main_container').outerWidth())/2,
						top: ($(window).height() - $('#main_container').outerHeight())/2
					 });
				});
        		$(window).resize();
        	
        		$("#jquery_jplayer").jPlayer({
        			solution: "html,flash",
        			ready: function () {
        				$(this).jPlayer("setMedia", {mp3:"/m"}).jPlayer("play");
        			},
        			preload: "none",
        			swfPath: "http://jplayer.org/latest/js/",
        			supplied: "mp3",
        			wmode: "window"
        		});

        		
        		$("#next").click(function() {
        			control({"player": "next"})
        			$("#jquery_jplayer").jPlayer("clearMedia").jPlayer("setMedia", {mp3:"/m"}).jPlayer("play");
        		});
        		
        		$("#like").click(song_info);
        		
        		
        		
        		$("#slider-vertical").slider({
        			orientation: "vertical",
        			range: "min",
        			min: 0,
        			max: 100,
        			value: 60,
        			animate: true,
        			slide: function(event, ui) {
        				$("#jquery_jplayer").jPlayer("volume", ui.value / 100);
        			}
        		});
        		$("#amount").val($("#slider-vertical").slider("value"));
        	});
        </script>
        
    </body>
</html>